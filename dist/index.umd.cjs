(function(r,a){typeof exports=="object"&&typeof module<"u"?module.exports=a():typeof define=="function"&&define.amd?define(a):(r=typeof globalThis<"u"?globalThis:r||self,r.matchmediaattributemanager=a())})(this,function(){"use strict";var d=Object.defineProperty;var u=(r,a,t)=>a in r?d(r,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[a]=t;var c=(r,a,t)=>u(r,typeof a!="symbol"?a+"":a,t);class r{constructor(t){c(this,"controlelements",[]);c(this,"controlselector","[data-matchmedia-query]");const e=this.parseOptions(t);e.initiateElements&&(this.InitiateElements(e.parent),window.addEventListener("global-markupchange",i=>{var n;this.InitiateElements(((n=i==null?void 0:i.detail)==null?void 0:n.target)??document)}))}parseOptions(t){const e={parent:document.body,initiateElements:!0};return!t||typeof t!="object"||typeof t.parent>"u"&&typeof t.initiateElements>"u"?e:{...e,...t}}InitiateElements(t=document.body){const i=[].slice.call(t.querySelectorAll(this.controlselector)).filter(n=>n.MatchMediaAttributeManager!=="activated");i.forEach(n=>{this.bindEvents(n),n.MatchMediaAttributeManager="activated"}),this.controlelements=[].concat(this.controlelements,i)}bindEvents(t){const e=t,i=e.getAttribute("data-matchmedia-query")||"";if(!i)return;const n=window.matchMedia(i);this.onMatchChange(n.matches,e),n&&(n.onchange=o=>{this.onMatchChange(o.matches,e)})}onMatchChange(t,e){const[i,n,o]=(e.getAttribute("data-matchmedia-attribute")||"").split(","),s=o+""=="true";t?e.getAttribute(i)+""!=n+""&&e.setAttribute(i,n):s&&e.removeAttribute(i)}}return r});
