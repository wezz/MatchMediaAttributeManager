(function(a,n){typeof exports=="object"&&typeof module<"u"?module.exports=n():typeof define=="function"&&define.amd?define(n):(a=typeof globalThis<"u"?globalThis:a||self,a.matchmediaattributemanager=n())})(this,function(){"use strict";var o=Object.defineProperty;var d=(a,n,t)=>n in a?o(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t;var s=(a,n,t)=>(d(a,typeof n!="symbol"?n+"":n,t),t);class a{constructor(t){s(this,"controlelements",[]);s(this,"controlselector","[data-matchmedia-query]");const e=this.parseOptions(t);e.initiateElements&&(this.InitiateElements(e.parent),window.addEventListener("global-markupchange",i=>{var r;this.InitiateElements(((r=i==null?void 0:i.detail)==null?void 0:r.target)??document)}))}parseOptions(t){const e={parent:document.body,initiateElements:!0};return!t||typeof t!="object"||typeof t.parent>"u"&&typeof t.initiateElements>"u"?e:{...e,...t}}InitiateElements(t=document.body){const i=[].slice.call(t.querySelectorAll(this.controlselector)).filter(r=>r.MatchMediaAttributeManager!=="activated");i.forEach(r=>{this.bindEvents(r),r.MatchMediaAttributeManager="activated"}),this.controlelements=[].concat(this.controlelements,i)}bindEvents(t){const e=t,i=e.getAttribute("data-matchmedia-query")||"";if(!i)return;const r=window.matchMedia(i);r.matches&&this.addAttribute(e),r.onchange=c=>{c.matches&&this.addAttribute(e)}}addAttribute(t){const[e,i]=(t.getAttribute("data-matchmedia-attribute")||"").split(",");t.getAttribute(e)+""!=i+""&&t.setAttribute(e,i)}}return a});
